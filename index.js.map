{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export\n   function createMarkup(arr) {\n            let result = arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    \n     <a href=\"${largeImageURL}\"><li class=\"gallery-card\">\n      \n      <img class=\"gallery-img\"\n     src=\"${webformatURL}\"\n     alt=\"${tags}\">\n     \n     <ul class=\"gallery-info-list\" >\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Likes</p>\n     <p class = \"info-data\">${likes}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Views</p>\n     <p class = \"info-data\">${views}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Comments</p>\n     <p class = \"info-data\">${comments}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Downloads</p>\n     <p class = \"info-data\">${downloads}</p>\n     </li>\n\n     </ul>\n     </li>\n     </a>`\n        \n    )\n    \n    return result.join(\" \")}\n    ","import axios from 'axios';\nexport \n    async function fetchImg(request, pageNumb, perPage) {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n            key: \"47546528-1d373426d359327bdc7f920b1\",\n            q: `${request}`,\n            image_type: `photo`,\n            page: pageNumb,\n            per_page: perPage,\n\t}\n   })\n     return response.data;       \n};\n///?key=47546528-1d373426d359327bdc7f920b1&q=${request}&image_type=photo","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport {createMarkup} from \"./js/render-functions.js\";\nimport { fetchImg } from \"./js/pixabay-api.js\";\nlet firstCard \nconst contBtn = document.querySelector(\".continue\")\nconst loader = document.querySelector(\".loader\")\nconst searchForm = document.querySelector(\".search\")\nconst search = document.querySelector(\".search-bar\")\nconst gallery = document.querySelector(\".gallery\")\nlet scrollParams\nlet page = 1;\nlet perPage = 15;\nlet loadedImgs = 15;\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\"\n    page = 1\n    loader.style.display = `block`;\n    const data = await fetchImg(search.value.split(\" \").join(\"+\"), 1, loadedImgs)\n            if (data.totalHits === 0) {\n                iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please, try again!\",\n                    position: \"topRight\",\n                    color: \"#ef4040\",\n                    messageColor: \"#fafafb\"\n                })\n                gallery.innerHTML = ``\n                loader.style.display = `none`;\n                contBtn.style.display = `none`;\n                return\n                }\n                if (data.totalHits <= loadedImgs) {\n                    contBtn.style.display = `none`;\n                } else {\n                    contBtn.style.display = `flex`\n                }\n                \n                \n                \n                gallery.insertAdjacentHTML(\"beforeend\", `${createMarkup(data.hits)}`)\n                loadedImgs = 15;\n                firstCard = document.querySelector(\"body > main > ul > a:nth-child(1)\");\n                scrollParams = firstCard.getBoundingClientRect().height;\n                \n                \n                scrollParams = {\n                    top: scrollParams * 2,\n                    left: 0,\n                    behavior: \"smooth\"\n                }\n        \n        \n            let lightbox = new SimpleLightbox(`.gallery a`, { captionsData: \"alt\", captionDelay: 250 })\n            lightbox.on('show.simplelightbox', function () {\n\t \n            });\n            loader.style.display = `none`;\n            lightbox.refresh()\n        \n    }\n   \n)\n    \ncontBtn.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    loader.style.display = `block`;\n    page += 1;\n    const data = await fetchImg(search.value.split(\" \").join(\"+\"), page, perPage)\n            \n            gallery.insertAdjacentHTML(\"beforeend\", `${createMarkup(data.hits)}`)\n            loadedImgs += 15;\n            window.scrollBy(scrollParams);\n\n                if (data.totalHits == loadedImgs) {  \n                    contBtn.style.display = `none`;\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\"\n                })\n                    loader.style.display = `none`;\n                return\n            }\n                \n            let lightbox = new SimpleLightbox(`.gallery a`, { captionsData: \"alt\", captionDelay: 250 })\n            lightbox.on('show.simplelightbox', function () {\n\t\n            });\n            loader.style.display = `none`;\n            lightbox.refresh()\n        \n    }\n   \n)\n    "],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchImg","request","pageNumb","perPage","axios","firstCard","contBtn","loader","searchForm","search","gallery","scrollParams","page","loadedImgs","event","data","iziToast","lightbox","SimpleLightbox"],"mappings":"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"}