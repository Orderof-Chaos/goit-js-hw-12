{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export\n   function createMarkup(arr) {\n            let result = arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    \n     <a href=\"${largeImageURL}\"><li class=\"gallery-card\">\n      \n      <img class=\"gallery-img\"\n     src=\"${webformatURL}\"\n     alt=\"${tags}\">\n     \n     <ul class=\"gallery-info-list\" >\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Likes</p>\n     <p class = \"info-data\">${likes}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Views</p>\n     <p class = \"info-data\">${views}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Comments</p>\n     <p class = \"info-data\">${comments}</p>\n     </li>\n\n     <li class=\"gallery-card-info\">\n     <p class = \"info-title\">Downloads</p>\n     <p class = \"info-data\">${downloads}</p>\n     </li>\n\n     </ul>\n     </li>\n     </a>`\n        \n    )\n    \n    return result.join(\" \")}\n    ","import axios from 'axios';\nexport \n    async function fetchImg(request, pageNumb, perPage) {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n            key: \"47546528-1d373426d359327bdc7f920b1\",\n            q: `${request}`,\n            image_type: `photo`,\n            page: pageNumb,\n            per_page: perPage,\n\t}\n   })\n     return response.data;       \n};\n///?key=47546528-1d373426d359327bdc7f920b1&q=${request}&image_type=photo","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport {createMarkup} from \"./js/render-functions.js\";\nimport { fetchImg } from \"./js/pixabay-api.js\";\nlet firstCard \nconst contBtn = document.querySelector(\".continue\")\nconst loader = document.querySelector(\".loader\")\nconst searchForm = document.querySelector(\".search\")\nconst search = document.querySelector(\".search-bar\")\nconst gallery = document.querySelector(\".gallery\")\nlet request\nlet scrollParams\nlet page = 1;\nlet perPage = 15;\nlet loadedImgs = 15;\nlet lightbox = new SimpleLightbox(`.gallery a`, { captionsData: \"alt\", captionDelay: 250 })\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    loader.style.display = `block`;\n    gallery.innerHTML = \"\"\n    contBtn.style.display = `none`;\n    loadedImgs = 15;\n    page = 1;\n    request = search.value.trim().split(\" \").join(\"+\")\n    search.value = \"\"\n    try {\n        const data = await fetchImg(request, 1, loadedImgs)\n        \n        \n    if (data.totalHits === 0) {\n        loader.style.display = `none`;\n        iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please, try again!\",\n                    position: \"topRight\",\n                    color: \"#ef4040\",\n                    messageColor: \"#fafafb\"\n                })\n                gallery.innerHTML = ``;\n                return\n                }\n                if (data.totalHits > loadedImgs) {\n                    contBtn.style.display = `flex`\n                }\n                \n                \n                \n    gallery.insertAdjacentHTML(\"beforeend\", `${createMarkup(data.hits)}`)\n    loader.style.display = `none`;\n    lightbox.refresh()\n    firstCard = document.querySelector(\"body > main > ul > a:nth-child(1)\");\n    scrollParams = firstCard.getBoundingClientRect().height;\n                \n                \n    scrollParams = {\n        top: scrollParams * 2,\n        left: 0,\n        behavior: \"smooth\"\n    }\n    } catch(error) {\n        loader.style.display = `none`;\n        contBtn.style.display = `none`;\n        iziToast.error({\n                    message: `Sorry, a ${error} error occurred`,\n                    position: \"topRight\",\n                    color: \"#ef4040\",\n                    messageColor: \"#fafafb\"\n                })\n                gallery.innerHTML = ``;}\n    }\n   \n)\n    \ncontBtn.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    contBtn.style.display = `none`;\n    loader.style.display = `block`;\n    page += 1;\n    try{const data = await fetchImg(request, page, perPage)\n    gallery.insertAdjacentHTML(\"beforeend\", `${createMarkup(data.hits)}`)\n    loader.style.display = `none`;\n    lightbox.refresh()\n    loadedImgs += 15;\n    if (data.totalHits <= loadedImgs) {\n        loader.style.display = `none`;\n        contBtn.style.display = `none`;\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\"\n        })\n        return\n    }\n    window.scrollBy(scrollParams);\n        contBtn.style.display = `flex`;\n    } catch (error) {\n        loader.style.display = `none`;\n        contBtn.style.display = `none`;\n        iziToast.error({\n                    message: `Sorry, a ${error} error occurred`,\n                    position: \"topRight\",\n                    color: \"#ef4040\",\n                    messageColor: \"#fafafb\"\n                })\n                gallery.innerHTML = ``;}\n}\n)  "],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchImg","request","pageNumb","perPage","axios","firstCard","contBtn","loader","searchForm","search","gallery","scrollParams","page","loadedImgs","lightbox","SimpleLightbox","event","data","iziToast","error"],"mappings":"owBACG,SAASA,EAAaC,EAAK,CAqC1B,OApCqBA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,gBAE/FL,CAAa;AAAA;AAAA;AAAA,YAGjBD,CAAY;AAAA,YACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAMcC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,UAOlC,EAEa,KAAK,GAAG,CAAC,CCpCvB,eAAeC,EAASC,EAASC,EAAUC,EAAS,CAUnD,OATgB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAG,GAAGH,CAAO,GACb,WAAY,QACZ,KAAMC,EACN,SAAUC,CACpB,CACF,CAAI,GACiB,IACrB,CCNA,IAAIE,EACJ,MAAMC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIT,EACAU,EACAC,EAAO,EACPT,EAAU,GACVU,EAAa,GACbC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAC1FP,EAAW,iBAAiB,SAAU,MAAOQ,GAAU,CACnDA,EAAM,eAAc,EACpBT,EAAO,MAAM,QAAU,QACvBG,EAAQ,UAAY,GACpBJ,EAAQ,MAAM,QAAU,OACxBO,EAAa,GACbD,EAAO,EACPX,EAAUQ,EAAO,MAAM,KAAI,EAAG,MAAM,GAAG,EAAE,KAAK,GAAG,EACjDA,EAAO,MAAQ,GACf,GAAI,CACA,MAAMQ,EAAO,MAAMjB,EAASC,EAAS,EAAGY,CAAU,EAGtD,GAAII,EAAK,YAAc,EAAG,CACtBV,EAAO,MAAM,QAAU,OACvBW,EAAS,MAAM,CACH,QAAS,4EACT,SAAU,WACV,MAAO,UACP,aAAc,SAClC,CAAiB,EACDR,EAAQ,UAAY,GACpB,MACC,CACGO,EAAK,UAAYJ,IACjBP,EAAQ,MAAM,QAAU,QAKxCI,EAAQ,mBAAmB,YAAa,GAAGnB,EAAa0B,EAAK,IAAI,CAAC,EAAE,EACpEV,EAAO,MAAM,QAAU,OACvBO,EAAS,QAAS,EAClBT,EAAY,SAAS,cAAc,mCAAmC,EACtEM,EAAeN,EAAU,sBAAuB,EAAC,OAGjDM,EAAe,CACX,IAAKA,EAAe,EACpB,KAAM,EACN,SAAU,QACb,CACA,OAAOQ,EAAO,CACXZ,EAAO,MAAM,QAAU,OACvBD,EAAQ,MAAM,QAAU,OACxBY,EAAS,MAAM,CACH,QAAS,YAAYC,CAAK,kBAC1B,SAAU,WACV,MAAO,UACP,aAAc,SAClC,CAAiB,EACDT,EAAQ,UAAY,EAAG,CAClC,CAEL,EAEAJ,EAAQ,iBAAiB,QAAS,MAAOU,GAAU,CAC/CA,EAAM,eAAc,EACpBV,EAAQ,MAAM,QAAU,OACxBC,EAAO,MAAM,QAAU,QACvBK,GAAQ,EACR,GAAG,CAAC,MAAMK,EAAO,MAAMjB,EAASC,EAASW,EAAMT,CAAO,EAKtD,GAJAO,EAAQ,mBAAmB,YAAa,GAAGnB,EAAa0B,EAAK,IAAI,CAAC,EAAE,EACpEV,EAAO,MAAM,QAAU,OACvBO,EAAS,QAAS,EAClBD,GAAc,GACVI,EAAK,WAAaJ,EAAY,CAC9BN,EAAO,MAAM,QAAU,OACvBD,EAAQ,MAAM,QAAU,OACxBY,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UACtB,CAAS,EACD,MACH,CACD,OAAO,SAASP,CAAY,EACxBL,EAAQ,MAAM,QAAU,MAC3B,OAAQa,EAAO,CACZZ,EAAO,MAAM,QAAU,OACvBD,EAAQ,MAAM,QAAU,OACxBY,EAAS,MAAM,CACH,QAAS,YAAYC,CAAK,kBAC1B,SAAU,WACV,MAAO,UACP,aAAc,SAClC,CAAiB,EACDT,EAAQ,UAAY,EAAG,CACvC,CACA"}